<!DOCTYPE html>
<html lang = 'pt-br'>
    <head>
        <title> Portfólio - Vinícius Saurin</title>
        <meta name = 'description' content = 'Este site tem como objetivo apresentar o portfólio de trabalhos de Vinícius Saurin'>  <!-- Descrição do site -->
        <meta name = 'keywords' content = 'machine-learning machine learning data-science data science'> <!-- Palavras chave para os motores de busca -->
        <meta name = 'robots' content = 'index, follow'> <!-- Google indexa o site -->
        <meta charset= 'utf-8'> <!-- Compreender simbolos do português -->
        <meta name = 'author' content = 'Vinícius Saurin'> <!-- Autor do site -->
        <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
        <link rel="canonical" href="https://www.viniciussaurin.com.br/portfolio_cov_matrix_p1.php">
        <link rel="apple-touch-icon" sizes="180x180" href="/medias/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/medias/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/medias/favicon/favicon-16x16.png">
        <link rel="manifest" href="/medias/favicon/site.webmanifest">
        <link rel="mask-icon" href="/medias/favicon/safari-pinned-tab.svg" color="#5bbad5">
        <link rel="shortcut icon" href="/medias/favicon/favicon.ico">
        <meta name="msapplication-TileColor" content="#2b5797">
        <meta name="msapplication-config" content="/medias/favicon/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">
        <link rel = 'stylesheet' href='css/portfolio.css' type = 'text/css'>
        <link rel = "stylesheet" href="css/swipebox.css">
        <link rel = 'stylesheet' href='css/fontawesome-free-5.11.2-web/css/all.min.css' type = 'text/css'>
        <link rel = 'stylesheet' href='css/fontawesome-free-5.11.2-web/css/brands.min.css' type = 'text/css'>
        <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
        <link rel = 'stylesheet' href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' type = 'text/css'>
        <a name="topo"></a>
        <!-- <script src="https://kit.fontawesome.com/932aed5840.js" crossorigin="anonymous"></script> -->
    </head>
    <body>
            
        <div class="wrapper">
            <nav class="flex-nav">
                <a href="#" class="toggleNav"> ☰ Menu</a>
                <ul>
                    <li><a href="index.php">Home</a></li>
                    <li><a href="portfolio_crise_diesel.php">Portfólio</a></li>
                    <li><a href="sobre.php">Sobre</a></li>
                    <li><a href="contato.php">Contato</a></li>
                    <li class="social">
                        <a href="https://www.linkedin.com/in/vinicius-saurin-594352197/" target="_blank">
                            <i class="fa fa-linkedin">
                            </i>
                        </a>
                    </li>
                    <li class="social">
                            <a href="https://github.com/vinisaurin/" target="_blank">
                                <i class="fa fa-github">
                                </i>
                            </a>
                    </li>
                    <!--
                    <li class="social">
                        <a href="https://www.hackerrank.com/vinisaurin">
                            <i class="fab fa-hackerrank">
                            </i>
                        </a>
                    </li>
                    <li class="social">
                        <a href="https://www.freecodecamp.org/vinisaurin">
                            <i class="fab fa-free-code-camp">
                            </i>
                        </a>
                    </li>
                    <li class="social">
                        <a href="https://www.kaggle.com/vinciussaurin">
                            <i class="fab fa-kaggle">
                            </i>
                        </a>
                    </li>
                    <li class="social">
                        <a href="https://stackoverflow.com/users/12397607/vinisaurin">
                            <i class="fab fa-stack-overflow">
                            </i>
                        </a>
                    </li>
                    -->
                </ul>
            </nav>
        </div>
        
        <div class="hero">
            <div class="with-sidebar">
                <div class="sidebar">
                    <h2>Projetos</h2>
                    <ul>
                        <div class="nav-sidebar">
                            <div class="container-tp container-tp1 open">
                                <div class="container-img">
                                    <img src="medias/datascience.svg" alt="Ícone Data Science">
                                </div>
                                <a href="#" class="toggleNav-sb1 open">Data Science <span>▼</span></a>                 
                            </div>
                            <ul class="sb1 open">
                                <li> <a href="portfolio_crise_diesel.php" class="link-portfolio"> Crise dos combustíveis</a></li>
                                <li> <a href="portfolio_web_scraping_rn.php" class="link-portfolio"> Web Scraping</a></li>
                                <li> <a href="portfolio_seg_pub_rj.php" class="link-portfolio"> Segurança Pública RJ </a></li>
                                <li> <a href="portfolio_uber_pickups.php" class="link-portfolio"> Uber Pickups</a></li>
                                <!-- <li> <a href="" class="link-portfolio"> Projeto 4 </a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 5 </a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 6 </a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 7 </a></li> -->
                            </ul>
                            <div class="container-tp container-tp2">
                                <div class="conteiner-img">
                                    <img src="medias/machine-learning.svg" alt="Ícone Machine Learning">
                                </div>
                                <a href="#" class="toggleNav-sb2">Machine Learning<span>▼</span></a>
                            </div>
                            <ul class="sb2">
                                <li> <a href="portfolio_rl_10armedbandit.php" class="link-portfolio"> 10-armed bandit problem </a></li>
                                <li> <a href="portfolio_text_class.php" class="link-portfolio"> Classificação de textos </a></li>
                                <!-- <li> <a href="" class="link-portfolio"> Projeto 2</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 3</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 4</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 5</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 6</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 7</a></li> -->
                            </ul>
                            <div class="container-tp container-tp3">
                                <div class="container-img">
                                    <img src="medias/asset-management.svg" alt="Ícone Asset Management">
                                </div>
                                <a href="#" class="toggleNav-sb3">Asset management<span>▼</span></a>
                            </div>                                
                            <ul class="sb3">
                                <li> <a href="portfolio_cov_matrix_p1.php" class="link-portfolio"> Matriz de Covariância</a></li>
                                <!-- <li> <a href="" class="link-portfolio"> Projeto 2</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 3</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 4</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 5</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 6</a></li>
                                <li> <a href="" class="link-portfolio"> Projeto 7</a></li> -->
                            </ul>
                        </div>
                    </ul>
                </div>
                <div class="not-sidebar">
                    <h2> O problema da estimação da matriz de covariância</h2>
                    <time class=container-time>
                        <div class="container-img">
                            <img src="medias/calendar.svg" alt="Calendário">
                        </div>    
                        05/02/2020
                    </time>
                    <article>
                        <p>
                            No mundo de gestão de ativos é de conhecimento geral que embora seja muito difícil prever os retornos dos ativos, existem métodos muito
                            mais robustos para a estimação da matriz de variância-covariância ou apenas matriz de covariância. Neste trabalho apresentaremos desde 
                            métodos mais simples como o amostral até métodos mais complexos e amplamente utilizados na indústria do <i>Asset Management.</i>
                        </p>
                        <h3>Os dados</h3>
                        <p>
                            Os dados utilizados foram retirados do site <a href="https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html" target="_blank">Fama & French</a> e 
                            reporta os retornos de cada tipo de indústria nas Bolsas de Valores americanas, sendo que é dado pesos iguais para cada ação constituinte da respectiva indústria.
                            Para a nossa análise utilizaremos os dados mensais a partir do ano de 1980. Em todos os métodos será utilizada uma janela dos últimos 60 meses ou 5 anos para a 
                            estimação da matriz de covariâncias.
                        </p>
                        <h3>Método amostral</h3>
                        <p> O método amostral como o próprio nome diz utiliza apenas das amostras dos retornos para fazer a estimativa. Portanto, dada a matriz de retornos <i>X</i>, a matriz
                            de covariância é calculada da seguinte forma:
                                $$ \hat{\Sigma} = \frac{1}{n-1} X'X  $$ 
                        </p>
                        <h3>Constant Correlation Model</h3>
                        <p>
                            Neste modelo, assume-se que todos os coeficientes de correlação são iguais, portanto os termos da matriz de covariância fora das diagonais são calculados da seguinte maneira:
                                $$ \hat{\sigma}_{ij} = \hat{\sigma_i}\hat{\sigma_j}\hat{\rho}$$
                                $$ \hat{\rho} = \frac{1}{N(N-1)}\sum_{i,j=1}^N \hat{\rho}_{ij}$$ 
                            para todo \(i \ne j\).

                        </p>

                        <h3>Shrinkage</h3>
                            
                        <p>
                            De forma generalizada, analisando o <i>paper Honey, I Shrunk the Sample Covariance Matrix</i> de Ledoit, O. e Wolf, M., podemos dizer que a ideia é mesclar um modelo simples como 
                            o método amostral que tem a vantagem de ser não viesado com qualquer outro modelo mais estruturado, o qual no nosso caso será o <i>Constant Correlation Model</i>. Desta forma, a 
                            matriz de covariância é calculada conforme descrito abaixo:
                                $$ \hat{\Sigma}_{Shrink} = \hat{\delta}^* F + (1-\hat{\delta}^*)S$$
                            onde F é o modelo que decidimos mesclar, S é a matriz de covariância amostral e \(\hat{\delta}^* \in [0,1]\). 
                        </p>

                        <h3>Média móvel ponderada exponencialmente</h3>
                        <p>
                            Assumindo que a volatilidade dos retornos dos ativos não é estacionária, não podemos ponderar da mesma forma retornos muito antigos e retornos mais recentes, portanto 
                            uma das alternativas é usar a média móvel ponderada exponencialmente, a qual atribui maiores pesos aos retornos mais recentes e é dada pela seguinte forma:
                                $$ \sigma_T^2 = \sum_{t=1}^T \alpha_t R_t^2 $$
                                onde $$\alpha_t = \frac{\lambda^{T-t}}{\sum_{t=1}^T \lambda^{T-t}}$$
                            \(\lambda\) é o parâmetro de decaimento que está entre 0 e 1, isto é, quanto menor \(\lambda\) menor é o peso atribuído aos retornos mais antigos, \(R_t\) é o retorno
                            no tempo \(t\) e \(\alpha_t\) é o peso para o tempo \(t\).
                        </p>
                        <h3>Modelos GARCH (Generalized Autoregressive Conditional Heteroskedacity)</h3>
                        <p>
                            Historicamente, os modelos ARCH foram uma alternativa de primeira linha desenvolvida para competir com as médias exponenciais e uma rápida olhada em sua forma funcional revela o porquê. 
                            Assumindo retornos com média zero, sua estrutura é muito simples:
                                $$ \sigma_T^2 = \gamma V_L + \sum_{t+1}^T \alpha_t R_t^2$$
                                onde $$\gamma + \sum_{t+1}^T \alpha_t = 1$$
                            e \(V_L\) é um termo que representa a variância de longo prazo.Já os modelos tipo GARCH tem um pequeno aperfeiçoamento que é a adição de um termo que relaciona a volatilidade do tempo 
                            \(t\) com a volatilidade do tempo \(t-1\), como apresentado a seguir:
                                $$ \sigma_T^2 = \gamma V_L + \sum_{t+1}^T \alpha_t R_t^2 + \beta \sigma_{T-1}^2$$
                        </p>

                        <h3> Modelos ortogonais</h3>
                            Os modelos ortogonais aplicados aos métodos de média móvel ponderada exponencialmente e ao método GARCH são uma pequena variação, na qual é feita um preprocessamento dos dados, aplicando
                            o método estatístico de análise multivariada PCA (Principal Component Analysis), o qual transforma a matriz dos retornos em uma matriz de vetores ortogonais, em outras palavras, torna os
                            retornos não correlacionados.

                        <h3>Resultados</h3>
                        <p>
                            Examinando a tabela abaixo, podemos dizer que o modelo com a estimativa de matriz de covariância via média móvel ponderada exponencialmente em sua versão ortogonal possui maior retorno 
                            anualizado e maior <i>sharpe ratio</i>, seguido diretamente pela sua versão tradicional. O ganho destes modelos em relação a <i>sharpe Ratio</i> quando comparados ao portfólio com todos
                            os pesos iguais (EW) e ao portfólio com a estimativa amostral foi de quase 80% e 7%, respectivamente.
                            <img src="medias/cov_matrix_p1/tabela.png" alt="Tabela com estatísticas">
                        </p>
                        <p>
                            Em terceiro e quarto lugares estão a estimativa amostral e o modelo GARCH, respectivamente. É importante notar que o retorno anualizado do modelo GARCH não foi muito inferior aos modelos de média móvel, o 
                            que deixou a sua <i>sharpe ratio </i> em nível inferior foi a sua maior volatilidade, o que seria um sinal de que não cumpriu bem o seu papel. Entretanto, se nos atentarmos ao gráfico abaixo o modelo GARCH 
                            conseguiu uma recuperação bem mais acelerada que os outros modelos após a crise dos <i>sub-primes</i> em 2009 e isto foi muito devido ao fato de que este modelo possui um número efetivo de constituintes (ENC 
                            na tabela) muito maior que os seus concorrentes. Quando o mercado mergulha em uma crise profundo assim como ocorreu em 2009, as correlações entre os ativos aumentam significativamente, portanto um portfólio 
                            mais diversificado, que é o caso do modelo GARCH, consegue um resultado mais rápido.
                            <img src="medias/cov_matrix_p1/CovarianceMatrix.png" alt="Retornos Acumulados">
                        </p>
                        <p>
                            Os modelos ortogonais proporcionaram uma melhora em ambos os casos, média ponderada e GARCH, em relação a <i>sharpe ratio</i>, mas a melhora não foi tão significativa no caso da média ponderada, enquanto que
                            para o modelo GARCH houve um aumento de 30%. Um segundo aperfeiçoamento no modelo GARCH foi considerar que os retornos não possuem distribuição Gaussiana, mas sim skewed T-student, isto é, uma distribuição 
                            T-student com assimetria, o que representa melhor os dados de retornos de ações, pois como se pode ver na coluna <i>Skewness</i> da tabela acima todos os métodos possuem valores negativos e alguns próximos de -1,
                            sendo que a distribuição Normal possui <i>skewness</i> igual a 0. O método Garch Ortogonal proporcionou uma melhora adicional de quase 6% na <i>sharpe ratio</i>, quando comparado com a sua versão tradicional.
                        </p>
                        <p>
                            Por fim, é natural dizer que caso a nossa amostra tivesse fim no ano de 2015, o melhor modelo seria o GARCH. Portanto, não é possível dizer que existe um modelo que é superior a todos os outros, soberano. Cada 
                            tipo de estimativa tem melhor performance em cenários específicos, nos deixando uma oportunidade para em um posterior trabalho fazer uma previsão de mudanças nos regimes econômicos e mesclar os modelos de estimativa 
                            da matriz de covariância para encontrar em qual regime cada um dos modelos se encaixa melhor.
                        </p>
                        

                    </article>
                    <br>
                    <a href="#topo" id="BackToTop">Voltar ao topo</a>
                    <br>
                    <br>
                    <span id="github-ind">*Todos os projetos desenvolvidos nesse site possuem os códigos fontes e resultados armazenados no <a href="https://github.com/vinisaurin/covariance_matrix" target="_blank">github <i class="fa fa-github"></i></a>.</span>
                </div>
            </div>
        </div>
        <footer>
            <p> Vinícius Saurin &copy; 2020</p>
        </footer>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="js/jquery-2.1.0.js"></script>
        <script src="js/jquery.swipebox.js"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>
            $(function() {
                $('.toggleNav').on('click', function(){
                    $('.flex-nav ul').toggleClass('open');
                    // $('.flex-nav ul').slideToggle();
                });
            });
            $(function() {
                $('.container-tp1').on('click', function(){
                    $('.nav-sidebar .sb1').toggleClass('open');
                    $('.container-tp1').toggleClass('open');
                    // $('.flex-nav ul').slideToggle();
                });
            });
            $(function() {
                $('.container-tp2').on('click', function(){
                    $('.nav-sidebar .sb2').toggleClass('open');
                    $('.container-tp2').toggleClass('open');
                    // $('.flex-nav ul').slideToggle();
                });
            });
            $(function() {
                $('.container-tp3').on('click', function(){
                    $('.nav-sidebar .sb3').toggleClass('open');
                    $('.container-tp3').toggleClass('open');
                    // $('.flex-nav ul').slideToggle();
                });
            });
        </script>
        <script type="text/javascript">
            $( document ).ready(function(){
                //$( '.swipebox' ).swipebox();

                $( '#gallery' ).click( function( e ) {
	                e.preventDefault();
                    $.swipebox( [
                        { href:'medias/seg_pub_rj/total_furtos.png', title:'Furtos' },
                        { href:'medias/seg_pub_rj/violentos.png', title:'Violentos' },
                        { href:'medias/seg_pub_rj/outros_ctra_patr.png', title:'Outros crimes contra o patrimônio' },
                        { href:'medias/seg_pub_rj/drogas.png', title:'Drogas' }, 
                        { href:'medias/seg_pub_rj/transito.png', title:'Transito' }
	                ] );
                } );

                $( '#gallery2' ).click( function( e ) {
	                e.preventDefault();
                    $.swipebox( [
                        { href:'medias/seg_pub_rj/Gráfico_barras_empilhadas_Capital.png', title:'Capital' },
                        { href:'medias/seg_pub_rj/Gráfico_barras_empilhadas_Interior.png', title:'Interior' },
                        { href:'medias/seg_pub_rj/Gráfico_barras_empilhadas_GrandeNiteroi.png', title:'Grande Niterói' },
	                ] );
                } );
            });
        </script>
    </body>
</html>